<!doctype html>
<html>
  <head>
    <title>kappa</title>
    <link href="ui/ui.css" rel="stylesheet">
  </head>
  <body>
    <div class="main">
      <canvas id="screen" width="640" height="480" tabindex="0"></canvas>

      <ul id="chat-messages"></ul>
      <form id="chat-form" action="">
        <input autocomplete="off" /><button>Send</button>
      </form>
    </div>
    <div class="sidebar">
      <div id="status-container"></div>

      <div id="layer-selector">
      </div>

      <h3>Tile Editor</h3>
      <ul id="tileset-list"></ul>
      <div id="tileset-image"></div>
    </div>

    <script src="node_modules/react/dist/react.min.js"></script>
    <script src="node_modules/react-dom/dist/react-dom.min.js"></script>
    <script>
      window.k = {};
    </script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="ui/ui.js"></script>
    <script src="ui/chat.js"></script>
    <script src="ui/tile-editor.js"></script>
    <script src="ui/status-display.js"></script>
    <script src="ui/ImageLoader.js"></script>
    <script src="ui/layer-selector.js"></script>
    <script>
(function () {
  'use strict';

  window.socket = io();

  window.chat = new k.ChatController(
      socket,
      document.getElementById('chat-messages'),
      document.getElementById('chat-form'));

  window.statusDisplay = new k.StatusDisplay(
      document.getElementById('status-container'));

  window.tileSelector = new k.TileSelector(
      document.getElementById('tileset-list'),
      document.getElementById('tileset-image'),
      k.imageLoader);

  window.screenController = new k.UiController(
      document.getElementById('screen'),
      statusDisplay,
      tileSelector,
      k.imageLoader,
      socket);

  window.layerSelector = React.createElement(k.LayerSelector, { socket: socket });
  ReactDOM.render(layerSelector, document.getElementById('layer-selector'));

  chat.init();
  tileSelector.init();
  screenController.init();
})();
    </script>
  </body>
</html>
